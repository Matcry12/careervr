<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}CareerGo - Hành trình hướng nghiệp số{% endblock %}</title>
    <!-- Google Fonts: Outfit -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="/static/style.css?v=2.6">
    {% block head %}{% endblock %}
</head>

<body class="{% block body_class %}{% endblock %}">
    <a class="skip-link" href="#mainContent">Bỏ qua điều hướng, tới nội dung chính</a>

    <!-- LOADING MODAL -->
    <div id="loadingOverlay" class="loading-overlay" role="status" aria-live="polite" aria-busy="false">
        <div class="loading-modal">
            <div class="spinner"></div>
            <div class="loading-text">{% block loading_text %}Đang tải...{% endblock %}</div>
            <div class="loading-subtext">{% block loading_subtext %}{% endblock %}</div>
        </div>
    </div>

    <!-- HEADER -->
    <header>
        <div class="logo">Career<span class="logo-go">Go</span></div>
        <button id="navToggle" class="nav-toggle" type="button" aria-label="Mở menu" aria-expanded="false"
            aria-controls="mainNav">
            ☰
        </button>
        <nav id="mainNav" aria-label="Điều hướng chính">
            <a href="/" class="nav-link {% if active_page == 'home' %}active{% endif %}" {% if active_page == 'home' %}aria-current="page"{% endif %}>Trang chủ</a>
            <a href="/test" class="nav-link auth-only {% if active_page == 'test' %}active{% endif %}" {% if active_page == 'test' %}aria-current="page"{% endif %}>RIASEC Test</a>
            <a href="/results" class="nav-link auth-only {% if active_page == 'results' %}active{% endif %}" {% if active_page == 'results' %}aria-current="page"{% endif %}>Kết quả</a>
            <a href="/community" class="nav-link auth-only {% if active_page == 'community' %}active{% endif %}" {% if active_page == 'community' %}aria-current="page"{% endif %}>Cộng
                đồng</a>
            <a href="/chatbot" class="nav-link auth-only {% if active_page == 'chatbot' %}active{% endif %}" {% if active_page == 'chatbot' %}aria-current="page"{% endif %}>AI
                Chatbot</a>
            <a href="/vr-mode" class="nav-link auth-only {% if active_page == 'vr' %}active{% endif %}" {% if active_page == 'vr' %}aria-current="page"{% endif %}>Trải nghiệm nghề
                nghiệp</a>
            <a href="/dashboard" class="nav-link admin-only {% if active_page == 'dashboard' %}active{% endif %}" {% if active_page == 'dashboard' %}aria-current="page"{% endif %}>Thống
                kê</a>
            <a href="/profile" class="nav-link auth-only {% if active_page == 'profile' %}active{% endif %}" {% if active_page == 'profile' %}aria-current="page"{% endif %}>Hồ sơ</a>
            <span id="navAuth" class="nav-auth"></span>
        </nav>
    </header>

    <!-- MAIN CONTENT -->
    <main id="mainContent" class="wrapper" role="main">
        {% block content %}{% endblock %}
    </main>

    {% block modals %}{% endblock %}

    <script src="/static/js/core.js?v=3.0"></script>
    <script src="/static/js/test-results-dashboard.js?v=3.0"></script>
    <script src="/static/js/chat.js?v=3.0"></script>
    <script src="/static/js/vr.js?v=3.0"></script>
    <script src="/static/js/community-profile.js?v=3.1"></script>
    <script src="/static/js/init.js?v=3.0"></script>
    {% block scripts %}{% endblock %}
</body>

</html>
