{% extends "base.html" %}

{% block title %}T∆∞ v·∫•n AI - CareerGo{% endblock %}
{% block loading_text %}ü§ñ AI ƒëang suy nghƒ©...{% endblock %}

{% block content %}
<section class="page active" id="chatbot">
    <div class="results-container">
        <h1 class="section-title">T∆∞ v·∫•n AI h∆∞·ªõng nghi·ªáp</h1>
        <div class="journey-stepper" aria-label="H√†nh tr√¨nh h∆∞·ªõng nghi·ªáp">
            <div class="journey-step"><span class="step-dot">1</span><span>Tr·∫Øc nghi·ªám</span></div>
            <div class="journey-step"><span class="step-dot">2</span><span>K·∫øt qu·∫£</span></div>
            <div class="journey-step"><span class="step-dot">3</span><span>VR</span></div>
            <div class="journey-step active"><span class="step-dot">4</span><span>AI Chat</span></div>
            <div class="journey-step"><span class="step-dot">5</span><span>C·ªông ƒë·ªìng</span></div>
        </div>
        <div class="journey-next panel">
            <strong>B∆∞·ªõc ti·∫øp theo</strong>
            <p class="muted">D√πng AI ƒë·ªÉ h·ªèi v·ªÅ ng√†nh h·ªçc, r·ªìi m·ªü c·ªông ƒë·ªìng ƒë·ªÉ tham kh·∫£o kinh nghi·ªám th·ª±c t·∫ø t·ª´ ng∆∞·ªùi h·ªçc kh√°c.</p>
            <div class="center-actions">
                <button class="btn btn-primary" onclick="goPage('community')">M·ªü C·ªông ƒë·ªìng</button>
                <button class="btn btn-secondary" onclick="goPage('results')">Xem l·∫°i K·∫øt qu·∫£</button>
            </div>
        </div>

        <div class="test-section panel-soft">
            <h3>H·ªì s∆° c·ªßa b·∫°n</h3>
            <div id="chatContext" class="muted">Ch∆∞a c√≥ d·ªØ li·ªáu. Vui l√≤ng l√†m tr·∫Øc nghi·ªám tr∆∞·ªõc.</div>
        </div>

        <div id="chatSessionBanner" class="status status-info" role="status" aria-live="polite">
            Ch∆∞a b·∫Øt ƒë·∫ßu phi√™n t∆∞ v·∫•n. Nh·∫•n "Y√™u c·∫ßu t∆∞ v·∫•n" ƒë·ªÉ m·ªü phi√™n.
        </div>

        <div class="chat-session-panel panel panel-soft">
            <div class="chat-session-head">
                <h3>Tr·∫°ng th√°i phi√™n t∆∞ v·∫•n</h3>
                <div id="chatStatePill" class="chat-state-pill idle">Ch∆∞a b·∫Øt ƒë·∫ßu</div>
            </div>
            <div id="chatSessionHint" class="helper-text">B·∫Øt ƒë·∫ßu phi√™n ƒë·ªÉ c√≥ th·ªÉ ƒë·∫∑t c√¢u h·ªèi tr·ª±c ti·∫øp cho AI.</div>
            <div id="chatStarterPrompts" class="chat-starter-prompts">
                <button class="chat-prompt-btn" type="button" onclick="applyChatStarterPrompt(this.dataset.prompt)"
                    data-prompt="Ng√†nh n√†o ph√π h·ª£p nh·∫•t v·ªõi h·ªì s∆° RIASEC c·ªßa em?">Ng√†nh n√†o ph√π h·ª£p nh·∫•t v·ªõi h·ªì s∆° RIASEC c·ªßa em?</button>
                <button class="chat-prompt-btn" type="button"
                    onclick="applyChatStarterPrompt(this.dataset.prompt)"
                    data-prompt="Em n√™n b·∫Øt ƒë·∫ßu h·ªçc k·ªπ nƒÉng g√¨ trong 30 ng√†y t·ªõi?">Em n√™n b·∫Øt ƒë·∫ßu h·ªçc k·ªπ nƒÉng g√¨ trong 30 ng√†y t·ªõi?</button>
            </div>
        </div>

        <div id="chatContainer" class="chat-shell">
            <div id="messagesBox" class="chat-messages" role="log" aria-live="polite" aria-relevant="additions text">
                <div class="chat-message ai">
                    Xin ch√†o! T√¥i s·∫µn s√†ng t∆∞ v·∫•n cho b·∫°n d·ª±a tr√™n k·∫øt qu·∫£ RIASEC. Nh·∫•n n√∫t "Y√™u c·∫ßu t∆∞ v·∫•n" b√™n d∆∞·ªõi ƒë·ªÉ
                    b·∫Øt ƒë·∫ßu.
                </div>
            </div>

            <div class="chat-input-row">
                <label for="chatInput" class="sr-only">Nh·∫≠p c√¢u h·ªèi cho AI</label>
                <input type="text" id="chatInput" class="input" placeholder="Nh·∫•n 'Y√™u c·∫ßu t∆∞ v·∫•n' ƒë·ªÉ b·∫Øt ƒë·∫ßu."
                    disabled>
                <button id="chatSendBtn" class="btn btn-primary" onclick="sendChatMessage()" disabled>G·ª≠i</button>
            </div>
        </div>

        <div class="center-actions">
            <button class="btn btn-primary" id="consultBtn" onclick="requestCounsel()">‚ú® Y√™u c·∫ßu t∆∞ v·∫•n</button>
            <button class="btn btn-secondary" onclick="goPage('results')">‚Üê Quay l·∫°i k·∫øt qu·∫£</button>
        </div>

        <div id="chatStatus" class="status" role="status" aria-live="polite"></div>

        <div class="community-suggest panel panel-soft">
            <h3>Th·∫£o lu·∫≠n c·ªông ƒë·ªìng li√™n quan</h3>
            <p class="helper-text">B·∫°n c√≥ th·ªÉ m·ªü nhanh c√°c b√†i vi·∫øt ph√π h·ª£p ƒë·ªÉ h·ªçc h·ªèi kinh nghi·ªám t·ª´ ng∆∞·ªùi kh√°c.</p>
            <div id="chatCommunitySuggestions" class="community-suggest-grid">
                <div class="muted">ƒêang t·∫£i g·ª£i √Ω...</div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
