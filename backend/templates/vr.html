{% extends "base.html" %}

{% block title %}Tr·∫£i nghi·ªám VR - CareerGo{% endblock %}

{% block content %}
<section class="page active" id="vr-mode">
    <h1 class="section-title">Tr·∫£i nghi·ªám Ngh·ªÅ nghi·ªáp</h1>
    <p class="section-subtitle">
        Kh√°m ph√° m√¥i tr∆∞·ªùng l√†m vi·ªác th·ª±c t·∫ø qua c√°c video m√¥ ph·ªèng ngh·ªÅ nghi·ªáp. Ch·ªçn m·ªôt ngh·ªÅ ƒë·ªÉ tr·∫£i nghi·ªám!
    </p>

    <div id="vrControls" class="vr-admin-panel" style="display: none;">
        <div id="devTools" class="admin-only panel panel-soft">
            <h3>Qu·∫£n l√Ω n·ªôi dung ngh·ªÅ nghi·ªáp</h3>
            <div class="vr-admin-actions">
                <button class="btn btn-primary" onclick="addNewVRJob()">Th√™m ngh·ªÅ m·ªõi</button>
                <button class="btn btn-secondary" onclick="downloadVRTemplate()">T·∫£i m·∫´u Excel</button>
                <label class="btn btn-secondary upload-label">
                üì§ Ch·ªçn file Excel
                <input id="vrImportFile" type="file" accept=".xlsx" style="display: none;">
                </label>
                <button class="btn btn-secondary" onclick="handleImport()">Import</button>
                <button class="btn btn-secondary" onclick="resetVRData()">Reset th·ª≠ nghi·ªám</button>
            </div>
            <p class="helper-text">Nh·∫≠p m√£ RIASEC 3 k√Ω t·ª± (v√≠ d·ª•: RIA), ∆∞u ti√™n k√Ω t·ª± ƒë·∫ßu l√† nh√≥m ngh·ªÅ ch√≠nh.</p>
            <div id="vrImportStatus" class="status" role="status" aria-live="polite"></div>
            <div id="vrImportErrors" class="status status-error" role="status" aria-live="polite"></div>
        </div>
    </div>

    <div id="vrGrid" class="vr-grid">
        <!-- Dynamic content will be loaded here -->
    </div>
</section>
{% endblock %}

{% block modals %}
<!-- VIDEO MODAL -->
<div id="videoModal" class="loading-overlay" onclick="closeVideoModal(event)" role="dialog" aria-modal="true"
    aria-labelledby="videoTitle" tabindex="-1">
    <div class="loading-modal modal-card">
        <div class="modal-close-row">
            <button onclick="closeVideoModal()" class="icon-btn" aria-label="ƒê√≥ng video">&times;</button>
        </div>
        <div class="video-frame-wrap">
            <iframe id="videoFrame" src="" class="video-frame" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
        </div>
        <h3 id="videoTitle" style="margin-top: 1rem; color: #4d7cff;"></h3>
    </div>
</div>

<!-- DEV EDITOR MODAL -->
<div id="devJobModal" class="loading-overlay" role="dialog" aria-modal="true" aria-labelledby="devModalTitle"
    tabindex="-1">
    <div class="loading-modal panel" style="width: 90%; max-width: 500px; text-align: left;">
        <h2 id="devModalTitle" class="section-title" style="margin: 0 0 1rem;">Ch·ªânh s·ª≠a Video VR</h2>

        <input type="hidden" id="devJobId">

        <div class="field">
            <label>Ti√™u ƒë·ªÅ:</label>
            <input class="input" type="text" id="devJobTitle">
        </div>

        <div class="field">
            <label>YouTube Video ID:</label>
            <input class="input" type="text" id="devJobVideoId" placeholder="VD: BZgv0k_0IQs">
        </div>

        <div class="field">
            <label>M√£ RIASEC (3 k√Ω t·ª±):</label>
            <input class="input" type="text" id="devJobRiasec" placeholder="VD: RIA" style="text-transform: uppercase;">
        </div>

        <div class="field">
            <label>M√¥ t·∫£:</label>
            <textarea class="input" id="devJobDesc" rows="3"></textarea>
        </div>

        <div class="field">
            <label>Icon (Emoji):</label>
            <input class="input" type="text" id="devJobIcon" placeholder="üé•">
        </div>

        <div class="center-actions" style="justify-content: flex-end;">
            <button onclick="closeDevModal()" class="btn btn-secondary">H·ªßy</button>
            <button onclick="saveDevJob()" class="btn btn-primary">L∆∞u thay ƒë·ªïi</button>
        </div>
        <div id="vrModalStatus" class="status" role="status" aria-live="polite"></div>
    </div>
</div>
{% endblock %}
